<!DOCTYPE html>
<html>

<head>
    <title>Tela de Pesquisa</title>
</head>

<body>
    <h1>Pesquisar Nome</h1>
    <form id="searchForm">
        <div>
            <input type="text" id="searchNameInput" placeholder="clique para pesquisar">
            <button type="button" onclick="pesquisarNome()">Pesquisar</button>
            <button type="button" id="newUserButton" onclick="inserirNovoUsuario()">Novo Usuário</button>

        </div>
    </form>

    <table>
        <tr>
            <th>Nome</th>
            <th>CPF/CNPJ</th>
            <th>Telefone</th>
            <th>Email</th>
            <th>Endereço Comercial</th>
            <th>Endereço Residencial</th>
            <th>Editar</th>
            <th>Excluir</th>
        </tr>
        <tr>
            <td>João da Silva</td>
            <td>123.456.789-00</td>
            <td>(11) 98765-4321</td>
            <td>joao.silva@email.com</td>
            <td>Rua Comercial, 123</td>
            <td>Rua Residencial, 456</td>
            <td><button onclick="editarDados(1, 'João da Silva', '123.456.789-00')">Editar</button></td>
            <td><button onclick="excluirDados(1, 'João da Silva')">Excluir</button></td>
        </tr>
        <tr>
            <td>Maria Souza</td>
            <td>987.654.321-00</td>
            <td>(21) 99876-5432</td>
            <td>maria.souza@email.com</td>
            <td>Avenida Comercial, 789</td>
            <td>Avenida Residencial, 987</td>
            <td><button onclick="editarDados(2, 'Maria Souza', '987.654.321-00')">Editar</button></td>
            <td><button onclick="excluirDados(2, 'Maria Souza')">Excluir</button></td>
        </tr>
    </table>

    <div id="editModal" style="display: none;">
        <h2>Editar Dados</h2>
        <label for="editNome">Nome:</label>
        <input type="text" id="editNome">
        <label for="editCPF">CPF/CNPJ:</label>
         <input type="text" id="editCPF">

        <button onclick="salvarEdicao()">Salvar</button>
        <button onclick="fecharModal()">Cancelar</button>
    </div>
    <div id="overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1;"></div>

    <div id="confirmModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2;">
        <div style="background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); text-align: center;">
            <h2 style="margin-top: 0;" id="modalMessage">Deseja realmente excluir?</h2>
            <button style="margin-right: 10px; padding: 8px 20px; background-color: #d9534f; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="confirmarExclusao()">Sim</button>
            <button style="padding: 8px 20px; background-color: #337ab7; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="fecharModalexcluir()">Cancelar</button>
        </div>
    </div>



    <script>
        $(document).ready(function () {
            function filterTableRows(searchValue) {
                const rows = $("table tr:not(:first-child)");

                rows.each(function () {
                    const nameColumn = $(this).find("td:first-child").text().toLowerCase();
                    if (nameColumn.includes(searchValue.toLowerCase())) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }

            $("#searchForm button").click(function () {
                const searchInput = $("#searchNameInput").val(); 
                filterTableRows(searchInput);
            });

            function clearSearch() {
                $("#searchNameInput").val(""); 
                $("table tr").show(); 
            }

        });

        function excluirDados(id, name) {
            window.currentId = id;

            var modal = document.getElementById('confirmModal');
            var modalMessage = document.getElementById('modalMessage');
            modalMessage.innerText = `Deseja realmente excluir ${name}?`;
            modal.style.display = 'block';
        }


        function confirmarExclusao() {
          

            fecharModalexcluir();
        }

        function fecharModal() {
            var modals = document.querySelectorAll('[id$=Modal]');
            modals.forEach(function (modal) {
                modal.style.display = 'none';
            });
        }

        function fecharModalexcluir() {
            var overlay = document.getElementById('overlay');
            var modals = document.querySelectorAll('[id$=Modal]');
            overlay.style.display = 'none';
            modals.forEach(function (modal) {
                modal.style.display = 'none';
            });
        }
        function pesquisarNome() {

        }

        function editarDados(id, nome, cpf) {
            var nomeParametro = nome;
            var cpfParametro = cpf;

            document.getElementById("editNome").value = nomeParametro;
            document.getElementById("editCPF").value = cpfParametro;

            abrirModal();
        }

        function abrirModal() {
            $("#editModal").show();
        }
        function inserirNovoUsuario() {
            window.location.href = "/Home/Cadastrar";
        }


        function fecharModal() {
            $("#editModal").hide();
        }

        function salvarEdicao() {
            fecharModal();
        }
    </script>
   

</body>

</html>
